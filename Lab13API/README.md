# 13 лабораторна робота React/TypeScript + ASP.NET Core API + Auth0

Застосунок ділиться на дві частини. FE - React/TypeScript SPA який робить Login\Signup за допомогою Auth0.
Дурга частина застосунку ASP.NET Core API який має публічні та приватні ендпоінти, приватні ендпоінти потребують перевірки токена логіну користувача та перевірки його на правдивість.
Таким чином ми маємо повністю захищений фулстек застосунок який має перевірки як на стороні користувача, так і на стороні сервера, що дає змогу захистити ендпоінти.

## Для запуску треба:
#### BE) Перейти в Lab13API -> dotnet run -> Отримаємо: localhost:6060
#### FE) Перейти в Lab13React -> npm install -> npm start -> Отримаємо: localhost:4040

## Для роботи нам потрібно налаштувати сервіс Auth0 за допомогою їх веб сайту:
1) Створимо необхідний сервіс для SPA React:
![](./media/image1.png)

Де в налаштуваннях ми можемо отримати необхідну нам інформацію для використання:
![](./media/image3.png)

Та налаштуємо посилання для переадресації користувача під час логіну:
![](./media/image4.png)

2) Налаштуємо сервіс API. Який надасть нам змогу робити перевірку токену користувача на бекенді.
![](./media/image2.png)

Ми отримаємо ось такі налаштування для використання в проекті ASP.NET
![](./media/image5.png)

## !!! Дані налаштування ми помістимо в .env файли для конфігурації проекту.

## Було створено React/TypeScript SPA застосунок з використанням Auth0:
![](./media/image6.png)

Та отримали ось такий інтерфейс:
![](./media/image7.png)

Як можна побачити ось так виглядає інтерфейс незалогіненого користувача.
Для прикладу було розроблено роут який абсолютно не потребує перевірки та доступний в табі "Публічна інформація":
![](./media/image8.png)

### При спробі перейти за посиланням на пряму (http://localhost:4040/lab2) нас перекине на форму логіну
### та
### Якщо ми спробуємо перейти на сторінку профілю, то нас перекине на форму для входу в акаунт:
![](./media/image9.png)

### Після проведення логіну можна отримати доступ до нових шляхів в застосунку:

1) Сторінка користувача:
![](./media/image10.png)

2) Сторінка приватного роуту (який потребує токену):
![](./media/image11.png)

3) А також доступ до лабораторних робіт:
![](./media/image12.png)

4) Приклад сторінки другої лабораторної:
![](./media/image13.png)

### !!! При виконанні методів лабораторних робіт інформація з форми надсилається разом з токеном для перевірки користувача.

## Як бекенд було розробено ASP.NET Core API з використанням Auth0 можливостей.
![](./media/image14.png)

Ось як приблизно виглядають ендпоінти нашого застосунку разом з перевірками на авторизованість:
1) Наприклад відправлення Message для приватного та публічного роуту:
![](./media/image15.png)

По аналогії так само захищено і інші ендпоінти на виконання лабораторних робіт.

Спробуємо надіслати запит на отримання публічної інформації:
![](./media/image16.png)

Спробуємо надіслати запит на отримання приватної інформації (без токену):
![](./media/image17.png)

### Протестуємо виконання лаборатрних робіт:
Для виконання в проекті були створені заготовки з файлів:
![](./media/image18.png)

1) Успішне виконання завдання:
![](./media/image19.png)

2) Помилка в шляху:
![](./media/image20.png)

3) Приклад ще одної лабораторної:
![](./media/image21.png)

#### При спробі отримати доступ до лабораторної без необхідної інформації про користувача буде отримано помилку
![](./media/image22.png)

## Також було створено кофігураційний Vagrantfile для запуску застосунків на Linux. Для отримання доступу до них в ВМ було прокинуто необхідні порти.
